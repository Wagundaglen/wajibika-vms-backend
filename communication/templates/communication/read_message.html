{% extends "base.html" %}
{% block title %}Read Message{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="card shadow-sm border-0">
        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
            <span>
                <i class="bi bi-envelope-open-fill"></i>
                Message Details
            </span>
            <small class="text-white-50">
                {{ message_obj.created_at|date:"M d, Y H:i" }}
            </small>
        </div>
        <div class="card-body">
            <h5 class="card-title fw-bold">
                {{ message_obj.subject|default:"(No Subject)" }}
            </h5>
            <h6 class="card-subtitle text-muted mb-3">
                From: 
                <span class="fw-semibold">{{ message_obj.sender.get_full_name|default:message_obj.sender.username }}</span>
            </h6>
            <hr>
            <p class="card-text fs-5" style="white-space: pre-line;">
                {{ message_obj.body }}
            </p>
        </div>
        <div class="card-footer d-flex gap-2">
            <a href="{% url 'send_message' %}?reply_to={{ message_obj.sender.id }}&subject=Re: {{ message_obj.subject|urlencode }}" 
               class="btn btn-outline-success">
                <i class="bi bi-reply"></i> Reply
            </a>
            <a href="{% url 'inbox' %}" class="btn btn-secondary">
                <i class="bi bi-arrow-left-circle"></i> Back to Inbox
            </a>
        </div>
    </div>
</div>
{% endblock %}
